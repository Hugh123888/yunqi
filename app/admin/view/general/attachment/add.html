<component is="style">
    .fileupload-thumb{
        overflow: hidden;
        position: relative;
    }
    .fa-times{
        position: absolute;
        right: 0px;
        top: 0px;
        background: var(--el-color-danger);
        color: #fff;
        padding:2px 4px;
        border-radius: 50%;
        cursor: pointer;
    }
</component>
<el-card shadow="never" style="border: 0;">
    <div class="form-body">
        <el-form ref="formRef" :model="addform" :rules="addformRules" label-width="120px">
            <el-form-item label="{:__('所属类别')}:">
                   <el-select v-model="addform.category" placeholder="请选择所属类别" :clearable="true" style="width: 100%">
                        {foreach name="categoryList" id="item"}
                        <el-option key="{$key}" label="{$item}" value="{$key}"></el-option>
                        {/foreach}
                   </el-select>
            </el-form-item>
            <el-form-item label="{:__('存储方式')}:" prop="disks">
                    <el-select v-model="addform.disks" placeholder="请选择存储方式" :clearable="true" style="width: 100%">
                          {foreach name="disksList" id="item"}
                          <el-option key="{$key}" label="{$item}" value="{$key}"></el-option>
                          {/foreach}
                    </el-select>
            </el-form-item>
            <el-form-item label="{:__('上传文件')}:" prop="files">
                <el-upload
                        :multiple="true"
                        ref="uploadRef"
                        :accept="accept"
                        :limit="10"
                        :on-change="fileUploadChange"
                        action="{$config.baseUrl}{$config.upload.uploadurl}"
                        :data="{disks:addform.disks,category:addform.category}"
                        :auto-upload="false"
                        list-type="picture-card">
                        <i class="fa fa-plus"></i>
                        <template #file="{file}">
                            <div class="fileupload-thumb">
                                <i class="fa fa-times" @click.stop="removeFile(file)"></i>
                                <img :src="showFileThumb(file)" class="thumb" style="width: 100%;height: 100%"/>
                                <el-progress status="success" :text-inside="true" :stroke-width="20" :percentage="file.percentage"></el-progress>
                            </div>
                        </template>
                </el-upload>
            </el-form-item>
            <el-form-item class="form-footer">
                <el-button type="primary" @click="submit"><i class="fa fa-check"></i>&nbsp;提交</el-button>
                <el-button type="info"  @click="reset"><i class="fa fa-reply"></i>&nbsp;重置</el-button>
            </el-form-item>
        </el-form>
    </div>
</el-card>